---
title: Python 正規表現
lang: ja
---

Pythonで正規表現を使用するためには、`re`モジュールを使います。正規表現は、文字列から特定のパターンを検索、置換、分割などを行う際に非常に有用です。`re`モジュールは、さまざまな関数を提供して正規表現の操作をサポートします。

### 主な `re` モジュールの関数:

- `re.match(pattern, string)`: 文字列の開始部分がパターンと一致するかどうかを確認します。一致するオブジェクトを返しますが、何も一致しない場合は `None` を返します。
- `re.search(pattern, string)`: 文字列全体を対象にパターンと一致する部分を検索します。一致する最初のオブジェクトを返しますが、何も一致しない場合は `None` を返します。
- `re.findall(pattern, string)`: 文字列からパターンと一致するすべての部分をリストで返します。
- `re.finditer(pattern, string)`: 文字列からパターンと一致するすべての部分のイテレータを返します。各一致は `match` オブジェクトです。
- `re.sub(pattern, repl, string)`: 文字列でパターンと一致するすべての部分を別の文字列に置換します。
- `re.compile(pattern)`: パターンをコンパイルして、後で再利用できる正規表現オブジェクトを作成します。

### 正規表現パターンの例:

- `\d`: 数字に一致します。
- `\w`: 単語文字（文字、数字、アンダースコア）に一致します。
- `\s`: 空白文字（スペース、タブなど）に一致します。
- `^`: 文字列の開始部分に一致します。
- `$`: 文字列の終わり部分に一致します。
- `[abc]`: 括弧内の文字のいずれかに一致します。
- `|`: OR条件を示します。`a|b` は `a` または `b` に一致します。

### 正規表現の使用例:

```python
import re

text = "My phone number is 123-456-7890."

# 数字を見つける
numbers = re.findall(r'\d', text)
print(numbers)  # ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0']

# 電話番号パターンを見つける
phone_pattern = re.compile(r'\d{3}-\d{3}-\d{4}')
match = phone_pattern.search(text)
if match:
    print(match.group())  # 123-456-7890
```

`re` モジュールを使用するときには、パターン文字列の前に `r` を付けて、raw 文字列であることを示すことが一般的です。こうすることで、Pythonのエスケープシーケンスを防止し、正規表現内の特殊文字が正しく解釈されます。

## 正規表現での group メソッド
`match.group()` メソッドは、`re` モジュールの `match` オブジェクトが持つメソッドの1つです。正規表現を使って文字列からパターンを検索する際、`re.match()`, `re.search()`, または `re.finditer()` 関数が返す `match` オブジェクトを介して、検索されたパターンに関連する情報を取得できます。`match.group()` メソッドは、この `match` オブジェクトから、検索されたパターンと実際に一致する部分の文字列を返します。

基本的に、`match.group()` メソッドは引数なしで呼び出されると、全体の一致（match）を返します。引数として数字を渡すことができ、これはパターン内の括弧（`()`）で定義されたグループを参照します。`match.group(0)` は全体のパターンに一致する文字列を返し、`match.group(1)`, `match.group(2)` などは、それぞれ1番目、2番目の括弧で囲まれたグループに対応する文字列を返します。

### 例での使用理由:

```python
phone_pattern = re.compile(r'\d{3}-\d{3}-\d{4}')
match = phone_pattern.search(text)
if match:
    print(match.group())  # 123-456-7890
```

上記の例では、`match.group()` メソッドは、`phone_pattern` 正規表現に一致する `text` 文字列内の部分、つまり電話番号パターンに該当する `'123-456-7890'` を返します。ここで `match.group()` を使用する理由は、実際に一致する文字列部分、つまり検索された電話番号を取得するためです。

### グループの使用例:

```python
phone_pattern = re.compile(r'(\d{3})-(\d{3})-(\d{4})')
match = phone_pattern.search(text)
if match:
    print(match.group())   # 全体の一致: '123-456-7890'
    print(match.group(1))  # 1番目の括弧に一致する部分: '123'
    print(match.group(2))  # 2番目の括弧に一致する部分: '456'
    print(match.group(3))  # 3番目の括弧に一致する部分: '7890'
```

この例では、`match.group(1)`, `match.group(2)`, `match.group(3)` が、それぞれ電話番号の市外局番、中間の番号、末尾の番号部分を返します。このようにグループを使用することで、複雑なパターンの中から特定の部分を簡単に抽出することができます。